def readFile(location,date,code):
    import os 
    import datetime
    time=date.strftime("%Y%m%d")
    ym = date.strftime("%Y%m")
    rootDir = 'C:\XX\workspace\DZH-'+location+ym+'-TXT'
    if 'DZH-'+location+ym+'-TXT' not in os.listdir('C:\XX\workspace'):
        raise Exception('no such folder')
    filePath=os.listdir(rootDir)
    if time not in filePath:
        raise Except('no such file!')    
    subpath = os.path.join(rootDir,time)
    codePath = os.listdir(subpath)
    filename = code+'_'+time+'.txt'
    if filename not in codePath:
        raise Exception('no such file')
    filePath = os.path.join(subpath,filename)
    file = open(filePath).read()
    return file


import datetime
location = 'SH' 
date=datetime.date(2014, 3, 5)
code = '000001'
file = readFile(location,date,code)
print(file)
